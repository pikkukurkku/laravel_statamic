<main>
    <!-- Header Section -->
    <header class="fixed top-0 left-0 w-full bg-[#1a1a1a] text-white p-4 transition-transform duration-300 ease-in-out z-50" id="header">
      <div class="flex items-center p-7">
        <!-- Logo -->
        {{ assets_field:first }}
          <img src="{{ url }}" alt="{{ alt or 'Logo' }}" class="h-[50px] w-auto object-contain" />
        {{ /assets_field:first }}
  
        <!-- Navigation Tabs -->
        <nav class="flex-grow flex justify-center">
          <div class="border-4 border-black rounded-lg inline-flex h-9 w-fit items-center justify-center p-[3px] bg-[#121212] shadow-lg">
            {{ grid_field }}
              {{ if text_field_1 }}
                <a href="#home" class="nav-tab inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-colors duration-200 ease-in-out text-gray-400 hover:text-gray-200 bg-[#121212] hover:bg-gray-800 uppercase">
                  {{ text_field_1 }}
                </a>
              {{ /if }}
              {{ if text_field_2 }}
                <a href="#projects" class="nav-tab inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-colors duration-200 ease-in-out text-gray-400 hover:text-gray-200 bg-[#121212] hover:bg-gray-800 uppercase">
                  {{ text_field_2 }}
                </a>
              {{ /if }}
              {{ if text_field_3 }}
                <a href="#kunden" class="nav-tab inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-colors duration-200 ease-in-out text-gray-400 hover:text-gray-200 bg-[#121212] hover:bg-gray-800 uppercase">
                  {{ text_field_3 }}
                </a>
              {{ /if }}
              {{ if text_field_4 }}
                <a href="#seitwerk-video" class="nav-tab inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-colors duration-200 ease-in-out text-gray-400 hover:text-gray-200 bg-[#121212] hover:bg-gray-800 uppercase">
                  {{ text_field_4 }}
                </a>
              {{ /if }}
              {{ if text_field_5 }}
                <a href="#footer" class="nav-tab inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-colors duration-200 ease-in-out text-gray-400 hover:text-gray-200 bg-[#121212] hover:bg-gray-800 uppercase">
                  {{ text_field_5 }}
                </a>
              {{ /if }}
            {{ /grid_field }}
          </div>
        </nav>
  
        <!-- Language Toggle Button -->
        <button id="language-toggle" class="ml-4 px-3 py-1.5 rounded-full text-sm font-medium border border-white/20 hover:border-white transition-colors duration-200" aria-label="Toggle language">
          <span class="text-white">{{ locale == 'en' ? 'DE' : 'EN' }}</span>
        </button>
      </div>
    </header>
  
    <!-- Active Tab Styling -->
    <style>
      .nav-tab.active {
        background-color: white !important;
        color: black !important;
        font-weight: 600 !important;
        box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05) !important;
        border-color: rgb(209 213 219) !important;
      }
    </style>
  
    <!-- JavaScript for Scroll Behavior, Active Tab, and Language Toggle -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // Scroll Behavior
        let lastScrollY = 0;
        let didScroll = false;
        const delta = 10;
        const header = document.getElementById('header');
  
        const handleScroll = () => {
          didScroll = true;
        };
  
        const checkScroll = () => {
          if (!didScroll) return;
          didScroll = false;
  
          const currentY = window.scrollY;
          if (Math.abs(currentY - lastScrollY) <= delta) return;
  
          if (currentY <= 0) {
            header.classList.remove('translate-y-[-100%]');
          } else if (currentY > lastScrollY) {
            header.classList.add('translate-y-[-100%]');
          } else {
            header.classList.remove('translate-y-[-100%]');
          }
  
          lastScrollY = currentY;
        };
  
        window.addEventListener('scroll', handleScroll);
        setInterval(checkScroll, 100);
  
        // Smooth Scrolling and Active Tab
        const navTabs = document.querySelectorAll('.nav-tab');
        navTabs.forEach(tab => {
          tab.addEventListener('click', (e) => {
            e.preventDefault();
            const href = tab.getAttribute('href').replace('#', '');
            const element = document.getElementById(href);
            if (element) {
              element.scrollIntoView({ behavior: 'smooth' });
              navTabs.forEach(t => t.classList.remove('active'));
              tab.classList.add('active');
            }
          });
        });
  
        // Set active tab based on current scroll position
        const sections = document.querySelectorAll('section[id], footer[id]');
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                const id = entry.target.id;
                navTabs.forEach(tab => {
                  tab.classList.remove('active');
                  if (tab.getAttribute('href') === `#${id}`) {
                    tab.classList.add('active');
                  }
                });
              }
            });
          },
          { threshold: 0.5 }
        );
  
        sections.forEach(section => observer.observe(section));
  
        // Language Toggle
        const toggleButton = document.getElementById('language-toggle');
        toggleButton.addEventListener('click', () => {
          const currentLocale = '{{ locale }}';
          const newLocale = currentLocale === 'en' ? 'de' : 'en';
          let newPathname = window.location.pathname;
  
          if (newPathname.startsWith('/de') || newPathname.startsWith('/en')) {
            newPathname = newPathname.replace(/^\/[a-z]{2}/, `/${newLocale}`);
          } else {
            newPathname = `/${newLocale}${newPathname}`;
          }
  
          if (newPathname === `/${newLocale}/`) {
            newPathname = `/${newLocale}`;
          }
  
          window.location.href = newPathname;
        });
      });
    </script>
  
    <!-- Main Content Sections -->
    {{ sections }}
    {{ if type == "hero" }}
      <section id="hero" class="relative w-full min-h-[600px] bg-[#1a1a1a] text-white dark:bg-white dark:text-black text-center py-18 px-6 shadow-md overflow-hidden pt-[120px]">
        <!-- Video Background -->
        {{ if background_image }}
          <video
            autoplay
            loop
            muted
            playsinline
            preload="auto"
            class="absolute inset-0 w-full h-full object-cover opacity-60"
          >
            <source src="{{ background_image }}" type="video/mp4">
          </video>
        {{ /if }}

        <!-- Overlay -->
        <div class="absolute inset-0 bg-black/20 dark:bg-white/20"></div>

        <!-- Content -->
        <div class="relative z-10 max-w-3xl mx-auto flex flex-col justify-center min-h-[600px]">
          <h1 class="text-5xl md:text-5xl font-bold mb-4 drop-shadow-lg">
            {{ headline }}
          </h1>
          <p class="text-lg md:text-xl text-gray-300 dark:text-gray-900 mb-8 drop-shadow-lg">
            {{ subheadline }}
          </p>
          <div class="flex flex-wrap justify-center gap-4">
            {{ if button_1_text }}
              <a
                href="{{ button_1_url ?: '#' }}"
                class="text-semibold px-4 py-2 bg-white text-black dark:bg-black dark:text-white hover:bg-gray-200 dark:hover:bg-gray-800 rounded-md font-medium transition-colors duration-200"
              >
                {{ button_1_text }}
              </a>
            {{ /if }}
            {{ if button_2_text }}
              <a
                href="{{ button_2_url ?: '#' }}"
                class="text-semibold px-4 py-2 bg-white text-black dark:bg-black dark:text-white hover:bg-gray-200 dark:hover:bg-gray-800 rounded-md font-medium transition-colors duration-200"
              >
                {{ button_2_text }}
              </a>
            {{ /if }}
            {{ if button_3_text }}
              <a
                href="{{ button_3_url ?: '#' }}"
                class="text-semibold px-4 py-2 bg-white text-black dark:bg-black dark:text-white hover:bg-gray-200 dark:hover:bg-gray-800 rounded-md font-medium transition-colors duration-200"
              >
                {{ button_3_text }}
              </a>
            {{ /if }}
          </div>
        </div>
      </section>
    {{ /if }}

  {{ if type == "projects" }}
    <section id="projects">
      <h2>Projects Section</h2>
      <!-- Add your custom rendering logic -->
    </section>
  {{ /if }}

  {{ if type == "kunden" }}
    <section id="kunden">
      <h2>Unsere Kunden</h2>
      {{ kunden_list }}
        <div class="kunde">
          <strong>{{ name }}</strong>
          <img src="{{ logo }}" alt="{{ name }}">
        </div>
      {{ /kunden_list }}
    </section>
  {{ /if }}

  {{ if type == "seitwerk_video" }}
    <section id="seitwerk-video">
        {{ if video_url }}
        {{ video_url }}
          {{ if contains "youtube.com/watch" }}
            <iframe
              width="560"
              height="315"
              src="https://www.youtube.com/embed/{{ video_url after '=' }}"
              frameborder="0"
              allowfullscreen>
            </iframe>
          {{ else }}
            <a href="{{ video_url }}" target="_blank" rel="noopener">Watch Video</a>
          {{ /if }}
        {{ /video_url }}
      {{ /if }}
      
    </section>
  {{ /if }}

  {{ if type == "footer" }}
    <footer>
      <p>{{ footer_text }}</p>
      <ul>
        {{ links }}
          <li><a href="{{ url }}">{{ label }}</a></li>
        {{ /links }}
      </ul>
    </footer>
  {{ /if }}
{{ /sections }}
</main>